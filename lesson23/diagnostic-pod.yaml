apiVersion: v1
kind: Pod
metadata:
  name: diagnostic-pod
  namespace: dev
spec:
  serviceAccountName: diagnostic-sa
  containers:
  - name: diagnostic-container
    image: ubuntu:latest
    command: ["/bin/bash", "-c"]
    args:
    - |
      apt update && apt install -y curl;
      curl -LO "https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl";
      chmod +x ./kubectl;
      mv ./kubectl /usr/local/bin/kubectl;
      while true; do
        echo "Обнаруженные поды с меткой app=wordpress:";
        kubectl get pods -l app=wordpress -n dev;
        sleep 60;
      done
